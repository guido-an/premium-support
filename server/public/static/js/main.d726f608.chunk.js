(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/logo-vanilla-marketing.6ad8f5e8.png"},31:function(e,t,a){e.exports=a(65)},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},61:function(e,t,a){},62:function(e,t,a){},63:function(e,t,a){},64:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(26),l=a.n(c),i=(a(36),a(2)),o=(a(37),a(9)),s=a(3),u=(a(38),a(13)),m=a.n(u),E=a(27),p=a.n(E),d=a(28),f=a.n(d).a.create({baseURL:"https://premiumsupport-ironhack.herokuapp.com/",withCredentials:!0});function h(e){var t=e.liftUserUp,a=e.currentUser,c=Object(n.useState)(!1),l=Object(i.a)(c,2),o=l[0],u=l[1],E=function(){f.get("/auth/logout").then((function(){t(null)}))},d=function(){a||alert("Questa sezione \xe8 privata. Effettua il login per accedere :) ")};return r.a.createElement("section",null,r.a.createElement("header",{id:"header-mobile"},r.a.createElement("div",{id:"header-mobile-container"},r.a.createElement("div",null,r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{className:"logo",src:m.a,alt:"logo-vanilla-marketing"}))),r.a.createElement("div",{id:"burger-icon"},r.a.createElement(p.a,{isOpen:o,menuClicked:function(){return u(!o)},width:30,height:18,strokeWidth:3,rotate:0,color:"black",borderRadius:0,animationDuration:.1}))),o&&r.a.createElement("nav",{id:"header-nav"},r.a.createElement("ul",null,r.a.createElement(s.b,{onClick:d,to:"/tickets"},"I miei tickets"),r.a.createElement(s.b,{onClick:d,to:"/crea-ticket"},"Apri un ticket"),r.a.createElement("p",{onClick:E,id:"logout-btn"},"Logout")))),r.a.createElement("header",{id:"header-desktop"},r.a.createElement("div",{id:"header-desktop-container"},r.a.createElement("div",null,r.a.createElement(s.b,{to:"/"},r.a.createElement("img",{className:"logo",src:m.a,alt:"logo-vanilla-marketing"}))),r.a.createElement("div",null,r.a.createElement("nav",{id:"header-nav"},r.a.createElement("ul",null,r.a.createElement(s.b,{onClick:d,to:"/tickets"},"I miei tickets"),r.a.createElement(s.b,{onClick:d,to:"/crea-ticket"},"Apri un ticket"),r.a.createElement(s.b,{onClick:d,to:"/admin"},"Admin")))),r.a.createElement("div",null,r.a.createElement("p",{onClick:E,id:"logout-btn"},"Logout")))))}var b=a(11),g=function(e){var t=e.component,a=e.currentUser,n=Object(b.a)(e,["component","currentUser"]);return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,Object.assign({},e,{currentUser:a})):r.a.createElement(o.a,{to:{pathname:"/",state:{from:e.location}}})}}))},v=function(e){var t=e.component,a=e.currentUser,n=Object(b.a)(e,["component","currentUser"]);return r.a.createElement(o.b,Object.assign({},n,{render:function(e){return a&&a.admin?r.a.createElement(t,Object.assign({},e,{currentUser:a})):r.a.createElement(o.a,{to:{pathname:"/",state:{from:e.location}}})}}))};a(61);function k(e){var t=e.liftUserUp,a=e.history,c=Object(n.useState)(""),l=Object(i.a)(c,2),o=l[0],s=l[1],u=Object(n.useState)(""),m=Object(i.a)(u,2),E=m[0],p=m[1];return r.a.createElement("section",{className:"login-section"},r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),f.post("/auth/login",{username:o,password:E}).then((function(e){var n=e.data.currentUser;t(n),n.admin?a.push("/admin"):a.push("/tickets")})).catch((function(e){console.log(e)}))}},r.a.createElement("p",null,r.a.createElement("strong",null,"Username")),r.a.createElement("input",{onChange:function(e){return s(e.target.value)},type:"text",placeholder:"Username",name:"username"}),r.a.createElement("p",null,r.a.createElement("strong",null,"Password")),r.a.createElement("input",{onChange:function(e){return p(e.target.value)},type:"password",placeholder:"*****",name:"password"}),r.a.createElement("button",{className:"button-success",type:"submit"},"LOGIN")))}function O(e){var t=e.liftUserUp,a=e.history;return r.a.createElement("section",null,r.a.createElement("h1",{className:"title-page"},"Premium support"),r.a.createElement(k,{liftUserUp:t,history:a}))}a(62);var j=function(e){var t=e.array;return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Titolo"),r.a.createElement("th",null,"Data"),r.a.createElement("th",null,"Servizio"),r.a.createElement("th",null,"Stato"),r.a.createElement("th",null,"Ticket"))),r.a.createElement("tbody",null,t.map((function(e,t){return r.a.createElement("tr",{key:t},r.a.createElement("td",null," ",r.a.createElement(s.b,{to:"/tickets/".concat(e._id)},r.a.createElement("strong",null,e.title))),r.a.createElement("td",null,e.time),r.a.createElement("td",null,e.service),e.active?r.a.createElement("td",null,"aperto"):r.a.createElement("td",null,"chiuso"),r.a.createElement("td",null," ",r.a.createElement(s.b,{to:"/tickets/".concat(e._id)},"> Vedi ticket")))}))))};function U(e){var t=e.currentUser,a=Object(n.useState)([]),c=Object(i.a)(a,2),l=c[0],o=c[1];return Object(n.useEffect)((function(){f.get("/tickets").then((function(e){o(l=e.data),console.log(l,"tickets from page")}))}),[]),r.a.createElement("section",null,r.a.createElement("div",{className:"section-container"},t&&r.a.createElement("h1",{className:"title-page"},"Hello ",t.username,"!"),r.a.createElement(j,{array:l})))}a(63);function y(e){var t=e.history,a=Object(n.useState)(""),c=Object(i.a)(a,2),l=(c[0],c[1],Object(n.useState)("")),o=Object(i.a)(l,2),s=(o[0],o[1],Object(n.useState)("")),u=Object(i.a)(s,2),m=(u[0],u[1],r.a.createRef());return r.a.createElement("div",null,r.a.createElement("div",{className:"section-container create-ticket-conatiner"},r.a.createElement("h1",{className:"title-page"},"Crea un ticket"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var a=new FormData(m.current);f.post("/crea-ticket",a).then((function(){t.push("/tickets")})).catch((function(e){console.log(e)}))},ref:m},r.a.createElement("label",null,"Per quale servizio possiamo aiutarti?"),r.a.createElement("select",{name:"service",required:!0},r.a.createElement("option",{value:""},"* Seleziona un servizio"),r.a.createElement("option",{value:"Web Development"},"Web Development"),r.a.createElement("option",{value:"Social Media"},"Social Media"),r.a.createElement("option",{value:"Web Marketing"},"Web Marketing"),r.a.createElement("option",{value:"Graphic Design"},"Graphic Design")),r.a.createElement("label",null,"Titolo"),r.a.createElement("input",{type:"text",name:"title",placeholder:"* Titolo",required:!0}),r.a.createElement("label",null,"Messaggio"),r.a.createElement("textarea",{className:"my-textarea",name:"message",placeholder:"* Messaggio",rows:"10",required:!0}),r.a.createElement("label",null,"Per caricare un file in .jpeg, .png o screenshot"),r.a.createElement("input",{id:"file-upload",type:"file",name:"picture"}),r.a.createElement("button",{className:"button-success",type:"submit"},"CREA TICKET"))))}a(64);var N=function(e){var t=e.match.params.id,a=Object(n.useState)({}),c=Object(i.a)(a,2),l=c[0],o=c[1],s=Object(n.useState)(!1),u=Object(i.a)(s,2),m=u[0],E=u[1],p=function(){f.get("/tickets/".concat(t)).then((function(e){o(l=e.data.ticket)}))};Object(n.useEffect)((function(){p()}),[]);var d=r.a.createRef();return console.log(l,"this is the ticket"),r.a.createElement("section",{className:"section-container"},r.a.createElement("div",null,r.a.createElement("h1",{className:"title-page"},l.title),r.a.createElement("div",{className:"message-container"},l.user&&r.a.createElement("p",null,r.a.createElement("strong",null,l.user.username)),r.a.createElement("span",{className:"ticket-time"},l.time),r.a.createElement("p",null,l.message))),l.answers&&l.answers.map((function(e,t){return r.a.createElement("div",{key:t,className:"message-container "+(e.admin?"admin-answer":"")},r.a.createElement("p",null,r.a.createElement("strong",null,e.username)),r.a.createElement("span",{className:"ticket-time"},e.time),r.a.createElement("p",null," ",e.message))})),r.a.createElement("h2",null,"Nuova risposta")," ",m&&r.a.createElement("p",{style:{color:"green"}},"Messaggio inviato con successo!"),r.a.createElement("form",{onSubmit:function(e){e.preventDefault();var t=new FormData(d.current);f.post("/answer",t).then((function(){p(),E(m=!0)})).catch((function(e){console.log(e)}))},ref:d},r.a.createElement("textarea",{className:"my-textarea",name:"message",placeholder:"* Messaggio",rows:"10",required:!0}),r.a.createElement("input",{type:"text",name:"_id",value:l._id}),r.a.createElement("input",{type:"text",name:"title",value:l.title}),r.a.createElement("input",{type:"text",name:"service",value:l.service}),l.user&&r.a.createElement("input",{type:"text",name:"userEmail",value:l.user.email}),r.a.createElement("button",{className:"button-success",type:"submit"},"RISPONDI")))};function w(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],c=t[1];return Object(n.useEffect)((function(){f.get("/admin").then((function(e){c(a=e.data),console.log(e,"tickets for admin")}))}),[]),r.a.createElement("section",{className:"section-container"},r.a.createElement("h1",null,"Tickets admin"),r.a.createElement(j,{array:a}))}var S=function(){var e=Object(n.useState)({}),t=Object(i.a)(e,2),a=t[0],c=t[1],l=function(e){c(a=e)};return Object(n.useEffect)((function(){f.get("/auth/currentUser").then((function(e){c(a=e.data.currentUser)})).catch((function(e){c(a=null)}))}),[]),console.log(a,"current user"),r.a.createElement("section",null,r.a.createElement(h,{liftUserUp:l,currentUser:a}),r.a.createElement(o.d,null,r.a.createElement(o.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(O,Object.assign({},e,{liftUserUp:l}))}}),r.a.createElement(g,{currentUser:a,path:"/crea-ticket",component:y}),r.a.createElement(g,{currentUser:a,exact:!0,path:"/tickets",component:U}),r.a.createElement(g,{currentUser:a,path:"/tickets/:id",component:N}),r.a.createElement(v,{currentUser:a,exact:!0,path:"/admin",component:w})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(s.a,null,r.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[31,1,2]]]);
//# sourceMappingURL=main.d726f608.chunk.js.map